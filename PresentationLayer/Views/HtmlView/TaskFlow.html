<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TaskFlow Dashboard</title>
    <style>
        /* General Settings */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        }

        body {
            background-color: #f4f5f7; /* Trello-style light gray background */
            color: #172b4d; /* Readable dark navy text color */
        }

        /* Navbar Design */
        .top-bar {
            height: 50px;
            background-color: #ffffff;
            border-bottom: 1px solid #dfe1e6;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .logo {
            font-weight: bold;
            font-size: 1.2rem;
            color: #0052cc; /* Vibrant blue for TaskFlow Logo */
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .bar-account-section {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .account {
            background-color: #0052cc;
            color: white;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            cursor: pointer;
        }

        /* Main Content Container */
        .main-container {
            max-width: 1000px; /* Max-width to center content */
            margin: 0 auto;
            padding: 40px 20px;
        }

        /* Section Headers */
        .section-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            margin-top: 30px;
            font-size: 1rem;
            color: #5e6c84;
            font-weight: 600;
        }

        .section-header span {
            margin-left: 10px;
        }

        /* Grid Structure (For Cards) */
        .boards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(190px, 1fr));
            gap: 20px;
        }

        /* Card Design */
        .board-card {
            background-color: #ffffff; /* Light colored card */
            height: 100px;
            border-radius: 8px; /* Modern oval corners */
            padding: 10px;
            font-weight: bold;
            color: #172b4d;
            cursor: pointer;
            box-shadow: 0 1px 3px rgba(0,0,0,0.12); /* Slight shadow */
            transition: transform 0.2s, box-shadow 0.2s;
            position: relative;
            overflow: hidden;
        }

        .board-card:hover {
            background-color: #ebecf0;
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(0,0,0,0.15);
        }

        /* Special style for cards with images (Like Trello) */
        .board-card.has-bg {
            background-size: cover;
            background-position: center;
            color: white;
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
        }

        .board-card.new-board {
            background-color: #f4f5f7;
            border: 2px dashed #dfe1e6;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #5e6c84;
            font-weight: normal;
        }

        /* Project (Workspace) Headers and Buttons */
        .workspace-title-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #dfe1e6;
        }

        .ws-left {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .ws-icon {
            background: linear-gradient(#4b91e2, #0052cc);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .ws-name {
            font-weight: 700;
            font-size: 1.1rem;
        }

        .ws-actions button {
            background-color: #ebecf0;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            margin-left: 5px;
            cursor: pointer;
            font-weight: 500;
            color: #172b4d;
            transition: background 0.2s;
        }

        .ws-actions button:hover {
            background-color: #dfe1e6;
        }

        /* Developer Joke CSS */
        .bug-fix-later {
            font-size: 0.7rem;
            color: transparent;
            position: absolute;
            bottom: 5px;
            right: 5px;
            user-select: none;
        }
        .board-card:hover .bug-fix-later {
            color: #ff0000; /* Visible on hover */
        }
        /* Arka planı karartan perde */
        .modal-overlay {
            display: none; /* Gizli başlar */
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.5); /* Yarı saydam siyah */
            justify-content: center; /* Ortala */
            align-items: center;     /* Ortala */
            z-index: 10000;
        }

        /* Kutunun kendisi */
        .modal-content {
            background: white;
            width: 400px;
            border-radius: 8px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            overflow: hidden;
            animation: slideDown 0.2s ease-out;
        }

        .modal-header {
            background: #f4f5f7;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #dfe1e6;
        }

        .modal-body {
            padding: 20px;
        }

        .modal-footer {
            padding: 15px 20px;
            background: #f4f5f7;
            text-align: right;
            border-top: 1px solid #dfe1e6;
        }

        /* Butonlar */
        .btn-confirm {
            background: #0079bf;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
        }

        .btn-cancel {
            background: transparent;
            color: #172b4d;
            border: none;
            padding: 8px 16px;
            margin-right: 10px;
            cursor: pointer;
        }

        @keyframes slideDown {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        /* Create Board Modal Özel Stilleri */
        .create-board-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        /* Önizleme Alanı */
        .board-preview-box {
            height: 120px;
            background-color: #0079bf; /* Varsayılan renk */
            background-size: cover;
            background-position: center;
            border-radius: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .preview-illustration {
            width: 80%;
            height: 80%;
            background: rgba(255,255,255,0.2);
            border-radius: 4px;
            /* Basit bir iskelet görünümü */
            display: flex;
            gap: 5px;
            padding: 5px;
        }
        .preview-col { flex: 1; background: rgba(255,255,255,0.3); border-radius: 3px; height: 100%; }

        /* Arka Plan Seçici Grid */
        .bg-picker-title { font-size: 12px; font-weight: bold; color: #5e6c84; margin-bottom: 5px; }
        .bg-grid-top {
            display: grid;
            grid-template-columns: repeat(4, 1fr); /* 4'lü sıra */
            gap: 8px;
            margin-bottom: 10px;
        }

        .bg-option-top {
            height: 40px;
            border-radius: 5px;
            border: none;
            cursor: pointer;
            background-size: cover;
            background-position: center;
            position: relative;
            transition: transform 0.1s;
        }
        .bg-option-top:hover { filter: brightness(0.9); }
        .bg-option-top.selected::after {
            content: '✓';
            color: white;
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            font-weight: bold;
        }

        .bg-grid-bot {
            display: grid;
            grid-template-columns: repeat(8, 1fr); /* 4'lü sıra */
            gap: 4px;
            margin-bottom: 10px;
        }

        .bg-option-bot {
            height: 20px;
            border-radius: 5px;
            border: none;
            cursor: pointer;
            background-size: cover;
            background-position: center;
            position: relative;
            transition: transform 0.1s;
        }
        .bg-option-bot:hover { filter: brightness(0.9); }
        .bg-option-bot.selected::after {
            content: '✓';
            color: white;
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            font-weight: bold;
        }
        /* Form Elemanları */
        .form-group label { display: block; font-size: 12px; font-weight: bold; color: #5e6c84; margin-bottom: 5px; }
        .form-input, .form-select {
            width: 100%;
            padding: 8px 12px;
            border: 2px solid #dfe1e6;
            border-radius: 4px;
            font-size: 14px;
            background-color: #fafbfc;
            transition: border-color 0.2s;
        }
        .form-input:focus, .form-select:focus {
            border-color: #0079bf;
            background-color: #fff;
            outline: none;
        }
        /* Yan Panel Stili */
        .side-modal {
            position: fixed; /* Sayfada sabit duracak */
            width: 300px; /* Genişlik */
            background: white;
            border-radius: 8px;
            box-shadow: 0 12px 24px rgba(0,0,0,0.3);
            z-index: 10005; /* Modal'ın (10000) üstünde olmalı */
            display: none;
            animation: slideInRight 0.2s ease-out;
        }

        .side-modal-header {
            padding: 10px 15px;
            border-bottom: 1px solid #dfe1e6;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #f4f5f7;
            border-radius: 8px 8px 0 0;
            font-weight: bold;
            color: #172b4d;
        }

        .side-modal-body {
            padding: 10px;
            max-height: 400px; /* Çok uzarsa scroll çıksın */
            overflow-y: auto;
        }

        .back-btn { cursor: pointer; color: #5e6c84; font-size: 1.2rem; }
        .back-btn:hover { color: #172b4d; }

        /* Grid Yapısı (Fotoğraflar için) */
        .side-grid-photos {
            display: grid;
            grid-template-columns: repeat(2, 1fr); /* 2'li sıra */
            gap: 8px;
            margin-bottom: 20px;
        }

        /* Grid Yapısı (Renkler için) */
        .side-grid-colors {
            display: grid;
            grid-template-columns: repeat(3, 1fr); /* 3'lü sıra */
            gap: 8px;
            margin-bottom: 10px;
        }

        .side-item {
            height: 60px;
            border-radius: 6px;
            background-size: cover;
            background-position: center;
            cursor: pointer;
            transition: transform 0.1s;
        }
        .side-item:hover { filter: brightness(0.9); transform: scale(1.02); }

        /* Kategori Başlıkları */
        .side-cat-title {
            font-size: 12px;
            font-weight: bold;
            color: #5e6c84;
            margin-bottom: 8px;
            margin-top: 5px;
        }

        @keyframes slideInRight {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }
        /* Hesap Menüsü Özel Stili */
        .account-menu-style {
            width: 300px; /* Genişliği sabitledik */
            display: none; /* Başlangıçta gizli */
            position: absolute;
            background: white;
            border-radius: 8px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.15);
            border: 1px solid #dfe1e6;
            z-index: 10002; /* Diğer menülerin üstünde */
            overflow: hidden;
        }

        /* Diğer tasarımsal detaylar */
        .account-header {
            background-color: #f4f5f7;
            padding: 15px;
            border-bottom: 1px solid #dfe1e6;
        }
        .account-name { font-weight: bold; color: #172b4d; font-size: 14px; }
        .account-email { color: #5e6c84; font-size: 12px; }
        .menu-divider { border: 0; border-top: 1px solid #dfe1e6; margin: 5px 0; }
        .logout-item { color: #b04632; }
        .logout-item:hover { background-color: #ffebe6; }

        /* Göstermek için kullanılan sınıf */
        .popup-menu.show {
            display: block;
        }
    </style>
</head>
<body>

<nav class="top-bar">
    <div class="logo">
        <span>📊 TaskFlow</span>
    </div>
    <div class="bar-account-section">
        <div style="cursor: pointer;" title="Notifications">🔔</div>
        <div class="account" onclick="AccountClick(event)">
            I
        </div>
    </div>
</nav>

<div class="main-container">

    <div class="recently-viewed-section">
        <div class="section-header">
            🕒 <span>Recently Viewed</span>
        </div>

        <div class="boards-grid">
            <div class="board-card has-bg" style="background-image: url('https://images.unsplash.com/photo-1483729558449-99ef09a8c325?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60');">
                Project Tracking
            </div>
            <div class="board-card" style="background-color: #ff9f1a; color: white;">
                Urgent Tasks
            </div>
            <div class="board-card has-bg" style="background-image: url('https://images.unsplash.com/photo-1519681393784-d120267933ba?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60');">
                Marketing
            </div>
        </div>
    </div>

    <div class="workspaces-section">
        <div class="section-header">
            💼 <span>YOUR WORKSPACES</span>
        </div>

        <div class="workspace-item" style="margin-bottom: 50px;">
            <div class="workspace-title-bar">
                <div class="ws-left">
                    <div class="ws-icon">T</div>
                    <div class="ws-name">Term Project</div>
                </div>
                <div class="ws-actions">
                    <button>Boards</button>
                    <button>Members</button>
                    <button>Settings</button>
                </div>
            </div>

            <div class="boards-grid">
                <div class="board-card has-bg" style="background-image: url('https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60');">
                    Backend API
                    <span class="bug-fix-later">TODO: Fix bugs... maybe tomorrow</span>
                </div>
                <div class="board-card has-bg" style="background-image: url('https://images.unsplash.com/photo-1507525428034-b723cf961d3e?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60');">
                    Frontend UI
                </div>
                <div class="board-card new-board">
                    Create New Board
                </div>
            </div>
        </div>

        <div class="workspace-item" style="margin-bottom: 50px;">
            <div class="workspace-title-bar">
                <div class="ws-left">
                    <div class="ws-icon">C</div>
                    <div class="ws-name">C# Learning Camp</div>
                </div>
                <div class="ws-actions">
                    <button>Boards</button>
                    <button>Members</button>
                    <button>Settings</button>
                </div>
            </div>

            <div class="boards-grid">
                <div class="board-card" style="background-color: #0079bf; color: white;">
                    Design Patterns
                </div>
                <div class="board-card" style="background-color: #d29034; color: white;">
                    Algorithms
                </div>
                <div class="board-card" style="background-color: #519839; color: white;">
                    Database
                </div>
                <div class="board-card new-board">
                    Create New Board
                </div>
            </div>
        </div>

        <div class="workspace-item">
            <div class="workspace-title-bar">
                <div class="ws-left">
                    <div class="ws-icon">G</div>
                    <div class="ws-name">Game Development</div>
                </div>
                <div class="ws-actions">
                    <button>Boards</button>
                    <button>Members</button>
                    <button>Settings</button>
                </div>
            </div>

            <div class="boards-grid">
                <div class="board-card has-bg" style="background-image: url('https://images.unsplash.com/photo-1511512578047-dfb367046420?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60');">
                    Level Design
                </div>
                <div class="board-card new-board" onclick="NewSectionClick()">
                    Create New Board
                </div>
            </div>
        </div>
    </div>
</div>
<div id="dynamicModal" class="modal-overlay">
    <div class="modal-content">
        <div class="modal-header">
            <h3 id="modalTitle">Başlık</h3>
            <button class="close-btn" onclick="closeModal()">×</button>
        </div>

        <div id="modalBody" class="modal-body">
        </div>

        <div class="modal-footer">
            <button class="btn-cancel" onclick="closeModal()">İptal</button>
            <button id="modalConfirmBtn" class="btn-confirm">Kaydet</button>
        </div>
    </div>
</div>
<div id="sideModal" class="side-modal" style="display: none;">
    <div class="side-modal-header">
        <span class="back-btn" onclick="closeSideModal()">⬅️</span>
        <span class="side-modal-title">Arkaplanlar</span>
        <button class="close-btn" onclick="closeSideModal()">×</button>
    </div>
    <div id="sideModalBody" class="side-modal-body">
    </div>
</div>
<div id="accountMenu" class="popup-menu account-menu-style">
    <div class="account-header">
        <div class="account-name">İbrahim Kabadayı</div>
        <div class="account-email">ibrahim@example.com</div>
    </div>

    <ul>
        <li onclick="alert('Profil')">👤 Profil ve Görünürlük</li>
        <li onclick="alert('Hareketler')">📊 Hareketler</li>
        <li onclick="alert('Ayarlar')">⚙️ Ayarlar</li>
        <hr class="menu-divider">
        <li class="logout-item" onclick="window.location.href='/Logout'">🚪 Çıkış Yap</li>
    </ul>
</div>
<script>
    function SectionClick(element){

    }

    const allBackgrounds = {
        photos: [
            "https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?w=200&q=80",
            "https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=200&q=80",
            "https://images.unsplash.com/photo-1506744038136-46273834b3fb?w=200&q=80",
            "https://images.unsplash.com/photo-1472214103451-9374bd1c798e?w=200&q=80",
            "https://images.unsplash.com/photo-1501854140884-074cf2b2c3af?w=200&q=80",
            "https://images.unsplash.com/photo-1505144808419-1957a94ca61e?w=200&q=80",
            "https://images.unsplash.com/photo-1465146344425-f00d5f5c8f07?w=200&q=80",
            "https://images.unsplash.com/photo-1433086966358-54859d0ed716?w=200&q=80"
        ],
        colors: [
            "#0079bf", "#d29034", "#519839", "#b04632",
            "#89609e", "#cd5a91", "#4bbf6b", "#00aecc",
            "#838c91", "#172b4d", "#ff9f1a", "#eb5a46"
        ]
    };
    function ShowAllBackgrounds(event){
        event.stopPropagation();
        event.preventDefault(); 

        const sideModal = document.getElementById('sideModal');
        const sideBody = document.getElementById('sideModalBody');

        let html = `
        <div class="side-cat-title">🖼️ Fotoğraflar</div>
        <div class="side-grid-photos">
            ${allBackgrounds.photos.map(url =>
            `<div class="side-item" onclick="selectFromSidePanel('${url}', 'image')" style="background-image: url('${url}')"></div>`
        ).join('')}
        </div>

        <div class="side-cat-title">🎨 Renkler</div>
        <div class="side-grid-colors">
            ${allBackgrounds.colors.map(color =>
            `<div class="side-item" onclick="selectFromSidePanel('${color}', 'color')" style="background-color: ${color}"></div>`
        ).join('')}
        </div>
    `;

        sideBody.innerHTML = html;

        const mainModalContent = document.querySelector('.modal-content');

        if (mainModalContent) {
            const rect = mainModalContent.getBoundingClientRect();

            sideModal.style.top = rect.top + 'px'; 
            sideModal.style.left = (rect.right + 10) + 'px'; 

            if (rect.right + 310 > window.innerWidth) {
                sideModal.style.left = (rect.right - 310) + 'px';
            }
        }

        sideModal.style.display = 'block';
    }

    function closeSideModal() {
        document.getElementById('sideModal').style.display = 'none';
    }

    function selectFromSidePanel(val, type) {
        if (type === 'image') {
            selectedBackground = `url('${val}')`;
        } else {
            selectedBackground = val;
        }

        const previewBox = document.getElementById('boardPreview');
        if (previewBox) {
            if (type === 'image') {
                previewBox.style.backgroundImage = `url('${val}')`;
                previewBox.style.backgroundColor = 'transparent';
            } else {
                previewBox.style.backgroundImage = 'none';
                previewBox.style.backgroundColor = val;
            }
        }

        document.querySelectorAll('.bg-option-top, .bg-option-bot').forEach(b => b.classList.remove('selected'));
    }

    const originalCloseModal = window.closeModal; 
    window.closeModal = function() {
        document.getElementById('dynamicModal').style.display = 'none';
        closeSideModal(); 
    }
    
    let selectedBackground = "#0079bf";
    function NewSectionClick() {
        const formHtml = `
        <div class="create-board-container">
            <div id="boardPreview" class="board-preview-box">
                <div class="preview-illustration">
                    <div class="preview-col"></div>
                    <div class="preview-col"></div>
                    <div class="preview-col"></div>
                </div>
            </div>

            <div>
                <div class="bg-picker-title">Arkaplan</div>
                <div class="bg-grid-top">
                    <button class="bg-option-top" data-type="image" data-val="url('https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?w=100&q=80')" style="background-image: url('https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?w=100&q=80')"></button>
                    <button class="bg-option-top" data-type="image" data-val="url('https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=100&q=80')" style="background-image: url('https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=100&q=80')"></button>
                    <button class="bg-option-top" data-type="image" data-val="url('https://images.unsplash.com/photo-1506744038136-46273834b3fb?w=100&q=80')" style="background-image: url('https://images.unsplash.com/photo-1506744038136-46273834b3fb?w=100&q=80')"></button>
                    <button class="bg-option-top" data-type="image" data-val="url('https://images.unsplash.com/photo-1472214103451-9374bd1c798e?w=100&q=80')" style="background-image: url('https://images.unsplash.com/photo-1472214103451-9374bd1c798e?w=100&q=80')"></button>
                </div>
                <div class="bg-grid-bot">
                <button class="bg-option selected" data-type="color" data-val="#0079bf" style="background-color: #0079bf;"></button>
                    <button class="bg-option-bot" data-type="color" data-val="#d29034" style="background-color: #d29034;"></button>
                    <button class="bg-option-bot" data-type="color" data-val="#519839" style="background-color: #519839;"></button>
                    <button class="bg-option-bot" data-type="color" data-val="#b04632" style="background-color: #b04632;"></button>
                    <button class="bg-option-bot" data-type="color" data-val="#98167b" style="background-color: #519839;"></button>
                    <button class="bg-option-bot" data-type="color" data-val="#519839" style="background-color: #e4d5d5;"></button>
                    <button class="bg-option-bot" data-type="color" data-val="#519839" style="background-color: #eab815;"></button>
                    <button class="bg-option-bot" onclick="ShowAllBackgrounds(event)">...</button>
                </div>       
            </div>

            <div class="form-group">
                <label>Pano Başlığı <span style="color:red">*</span></label>
                <input type="text" id="newBoardName" class="form-input" placeholder="Örn: Yaz Stajı Planı">
                <div id="inputError" style="color:red; font-size:12px; display:none; margin-top:5px;">⚠️ Pano başlığı gerekli</div>
            </div>

            <div class="form-group">
                <label>Çalışma Alanı</label>
                <select id="workspaceSelect" class="form-select">
                    <option value="1">Term Project</option>
                    <option value="2">Kişisel İşler</option>
                </select>
            </div>

             <div class="form-group">
                <label>Görünürlük</label>
                <select class="form-select">
                    <option>🔒 Özel</option>
                    <option>💼 Çalışma Alanı</option>
                    <option>🌎 Herkese Açık</option>
                </select>
            </div>
        </div>
    `;
        
        showModal("Pano Oluştur", formHtml, () => {
            const nameInput = document.getElementById('newBoardName');

            if (!nameInput.value.trim()) {
                nameInput.style.borderColor = "red";
                document.getElementById('inputError').style.display = "block";
                return; 
            }
            
            const payload = {
                name: nameInput.value,
                background: selectedBackground, 
                workspaceId: document.getElementById('workspaceSelect').value
            };

            console.log("Creating Board with:", payload);
            // Burada AJAX isteği atılacak... createBoard(payload);
            closeModal();
        });
        
        const bgButtons = document.querySelectorAll('.bg-option-top, .bg-option-bot');
        const previewBox = document.getElementById('boardPreview');

        bgButtons.forEach(btn => {
            btn.addEventListener('click', function() {
                
                bgButtons.forEach(b => b.classList.remove('selected'));
                this.classList.add('selected');
                
                const val = this.getAttribute('data-val');
                selectedBackground = val;

                
                if (this.getAttribute('data-type') === 'image') {
                    previewBox.style.backgroundImage = val;
                    previewBox.style.backgroundColor = 'transparent';
                } else {
                    previewBox.style.backgroundImage = 'none';
                    previewBox.style.backgroundColor = val;
                }
            });
        });
    }

    function AccountClick(event) {
        event.stopPropagation();

        const menu = document.getElementById('accountMenu');

        if (menu.classList.contains('show')) {
            menu.classList.remove('show');
            return;
        }

        document.querySelectorAll('.popup-menu').forEach(m => m.classList.remove('show'));

        const button = event.currentTarget;
        const rect = button.getBoundingClientRect();

        const menuWidth = 300;

        menu.style.top = (rect.bottom + window.scrollY + 10) + 'px';

        menu.style.left = (rect.right + window.scrollX - menuWidth) + 'px';

        menu.classList.add('show');
    }

    document.addEventListener('click', function(event) {
        const menu = document.getElementById('accountMenu');
        if (menu && !menu.contains(event.target)) {
            menu.classList.remove('show');
        }
    });
    function BoardsButtonClick(){

    }

    function MembersButtonClick(){

    }

    function SettingsButtonClick(){

    }

    function showModal(title, htmlContent, onConfirm) {
        const modal = document.getElementById('dynamicModal');

        document.getElementById('modalTitle').innerText = title;
        document.getElementById('modalBody').innerHTML = htmlContent;

        const confirmBtn = document.getElementById('modalConfirmBtn');

        const newBtn = confirmBtn.cloneNode(true);
        confirmBtn.parentNode.replaceChild(newBtn, confirmBtn);

        newBtn.addEventListener('click', () => {
            onConfirm();
            closeModal();
        });

        modal.style.display = 'flex';
    }

    function closeModal() {
        document.getElementById('dynamicModal').style.display = 'none';
    }

    document.addEventListener('keydown', (e) => {
        if (e.key === "Escape") closeModal();
    });
</script>
</body>
</html>